---
// src/components/atoms/SpotlightCard.astro
---

<div class="spotlight-card relative p-6 border border-neutral-800 rounded-lg overflow-hidden group transition-colors duration-300 bg-neutral-900/50">
  <div class="hover-effect pointer-events-none absolute -inset-px transition opacity duration-300 opacity-0"></div>
  <div class="relative z-10">
    <slot />
  </div>
</div>

<script>
 function setupHoverEffect() {
   const cards = document.querySelectorAll('.spotlight-card');

   cards.forEach((card) => {
     const hoverEffect = card.querySelector('.hover-effect') as HTMLElement;

     card.addEventListener('mousemove', ((e: Event) => {
       const mouseEvent = e as MouseEvent;
       const rect = card.getBoundingClientRect();
       const x = mouseEvent.clientX - rect.left;
       const y = mouseEvent.clientY - rect.top;

       hoverEffect.style.background = `radial-gradient(600px circle at ${x}px ${y}px, rgba(255,255,255,0.06), transparent 40%)`;
     }) as EventListener);

     card.addEventListener('mouseenter', () => {
       hoverEffect.style.opacity = '1';
     });

     card.addEventListener('mouseleave', () => {
       hoverEffect.style.opacity = '0';
     });
   });
 }

 // Run on initial load and view transitions
 document.addEventListener('astro:page-load', setupHoverEffect);
 if (document.readyState === 'loading') {
   document.addEventListener('DOMContentLoaded', setupHoverEffect);
 }
 else {
   setupHoverEffect();
 }
</script>
